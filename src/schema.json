{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"$id": "https://schema.JsonSchema42.org/jns42-intermediate-b/schema.json",
	"title": "JsonSchema42 intermediate schema",
	"type": ["object"],
	"required": ["nodes"],
	"properties": {
		"nodes": {
			"type": "object",
			"additionalProperties": {
				"$ref": "#/$defs/node"
			}
		}
	},
	"$defs": {
		"node": {
			"type": ["object"],
			"required": ["deprecated", "types", "validators"],
			"properties": {
				"title": {
					"$ref": "#/$defs/text"
				},
				"description": {
					"$ref": "#/$defs/text"
				},
				"examples": {
					"type": "array",
					"items": true
				},
				"deprecated": { "type": "boolean" },
				"types": {
					"type": "array",
					"items": {
						"type": "string",
						"enum": [
							"never",
							"any",
							"null",
							"boolean",
							"integer",
							"number",
							"string",
							"tuple",
							"array",
							"object",
							"map"
						]
					}
				},
				"validators": {
					"type": "array",
					"items": {
						"$ref": "#/$defs/validator-union"
					}
				},
				"itemTypeNodeIds": {
					"type": "array",
					"items": {
						"$ref": "#/$defs/node-reference"
					}
				},
				"itemTypeNodeId": {
					"$ref": "#/$defs/node-reference"
				},
				"propertyTypeNodeIds": {
					"type": "object",
					"additionalProperties": {
						"$ref": "#/$defs/node-reference"
					}
				},
				"propertyTypeNodeId": {
					"$ref": "#/$defs/node-reference"
				},
				"superNodeId": { "$ref": "#/$defs/node-reference" },
				"oneOf": {
					"type": "array",
					"items": {
						"$ref": "#/$defs/node-reference"
					}
				},
				"anyOf": {
					"type": "array",
					"items": {
						"$ref": "#/$defs/node-reference"
					}
				},
				"allOf": {
					"type": "array",
					"items": {
						"$ref": "#/$defs/node-reference"
					}
				},
				"ifThenElse": {
					"type": "object",
					"required": ["if", "then"],
					"properties": {
						"if": { "$ref": "#/$defs/node-reference" },
						"then": { "$ref": "#/$defs/node-reference" },
						"else": { "$ref": "#/$defs/node-reference" }
					}
				},
				"not": { "$ref": "#/$defs/node-reference" }
			}
		},
		"node-reference": {
			"type": "string",
			"minimumLength": 1
		},
		"validator-union": {
			"oneOf": [
				{ "$ref": "#/$defs/boolean-validator" },
				{ "$ref": "#/$defs/integer-validator" },
				{ "$ref": "#/$defs/number-validator" },
				{ "$ref": "#/$defs/integer-validator" },
				{ "$ref": "#/$defs/string-validator" },
				{ "$ref": "#/$defs/array-validator" },
				{ "$ref": "#/$defs/map-validator" }
			]
		},
		"boolean-validator": {
			"type": "object",
			"required": ["type"],
			"properties": {
				"type": {
					"type": "string",
					"const": "boolean"
				},
				"options": {
					"type": "array",
					"items": {
						"type": "boolean"
					}
				}
			}
		},
		"integer-validator": {
			"type": "object",
			"required": ["type"],
			"properties": {
				"type": {
					"type": "string",
					"const": "integer"
				},
				"options": {
					"type": "array",
					"items": {
						"type": "integer"
					}
				},
				"minimumInclusive": {
					"type": "integer"
				},
				"minimumExclusive": {
					"type": "integer"
				},
				"maximumInclusive": {
					"type": "integer"
				},
				"maximumExclusive": {
					"type": "integer"
				},
				"multipleOf": {
					"type": "integer"
				}
			}
		},
		"number-validator": {
			"type": "object",
			"required": ["type"],
			"properties": {
				"type": {
					"type": "string",
					"const": "number"
				},
				"options": {
					"type": "array",
					"items": {
						"type": "number"
					}
				},
				"minimumInclusive": {
					"type": "number"
				},
				"minimumExclusive": {
					"type": "number"
				},
				"maximumInclusive": {
					"type": "number"
				},
				"maximumExclusive": {
					"type": "number"
				},
				"multipleOf": {
					"type": "number"
				}
			}
		},
		"string-validator": {
			"type": "object",
			"required": ["type"],
			"properties": {
				"type": {
					"type": "string",
					"const": "string"
				},
				"options": {
					"type": "array",
					"items": {
						"type": "string"
					}
				},
				"minimumLength": {
					"type": "integer",
					"minimumInclusive": 0
				},
				"maximumLength": {
					"type": "integer"
				},
				"valuePattern": {
					"type": "string"
				}
			}
		},
		"array-validator": {
			"type": "object",
			"required": ["type"],
			"properties": {
				"type": {
					"type": "string",
					"const": "array"
				},
				"minimumItems": {
					"$ref": "#/$defs/minimum-boundary"
				},
				"maximumItems": {
					"$ref": "#/$defs/maximum-boundary"
				},
				"uniqueItems": {
					"type": "boolean"
				}
			}
		},
		"map-validator": {
			"type": "object",
			"required": ["type"],
			"properties": {
				"type": {
					"type": "string",
					"const": "map"
				},
				"required": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"uniqueItems": true
				},
				"minimumProperties": {
					"$ref": "#/$defs/minimum-boundary"
				},
				"maximumProperties": {
					"$ref": "#/$defs/maximum-boundary"
				},
				"keyPattern": {
					"type": "string"
				}
			}
		},
		"minimum-boundary": {
			"type": "integer",
			"minimumInclusive": 0
		},
		"maximum-boundary": {
			"type": "integer",
			"minimumInclusive": 0
		},
		"text": {
			"type": "string",
			"minimumLength": 1
		}
	}
}
